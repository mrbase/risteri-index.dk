<?php

$thanks = [
    'Michael' => [
        'name' => 'Michael Kjeldsen',
        'url' => 'http://www.theforce.dk/',
    ],
    'Logan' => [
        'name' => 'Logan Raarup',
        'url' => 'http://logan.dk/',
    ],
    'Marie' => [
        'name' => 'Marie Støvlbæk Garbenfeldt',
        'url' => 'http://www.fleurie.dk/',
    ],
    'Per' => [
        'name' => 'Per Gylling',
        'url' => 'https://www.facebook.com/elehammer',
    ],
    'Rita' => [
        'name' => 'Rita Jacobsen',
        'url' => 'https://www.facebook.com/nielsenrita',
    ],
    'Jonny' => [
        'name' => 'Jonny Højdam',
        'url' => 'http://mindthemedia.com/',
    ],
];

$shops = [
    [
        'name' => 'Great Coffee',
        'url' => 'http://www.greatcoffee.dk/',
        'address' => 'Klostergade 32, Aarhus C',
        'added' => '2015-08-26 12:00:00',
        'thanks' => 'Michael',
        'tags' => ['jylland'],
        'facebook' => 'pages/Great-Coffee-Risteri-Detail-og-kaffebar/190823127616019',
        'twitter' => 'sorenstiller',
        'instagram' => 'greatcoffee_aarhus',
        'blog' => 'http://www.greatcoffee.dk/the-great-blog/',
        'cvr' => 31315174,
    ],
    [
        'name' => 'KONTRA Coffee',
        'url' => 'http://www.kontracoffee.com/',
        'address' => 'Dag Hammarskjölds Allé 36, 2100 København Ø',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['sjælland'],
        'facebook' => 'kontracoffee',
        'instagram' => 'kontracoffee',
        'blog' => 'http://www.kontracoffee.com/blog',
        'cvr' => 28520360,
    ],
    [
        'name' => 'Kaffe Kaffe',
        'url' => 'http://kaffekaffe.dk/',
        'address' => 'St. Sct. Mikkelsgade 10G, 8800 Viborg',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['jylland'],
        'blog' => 'http://kaffekaffe.dk/nyheder/',
    ],
    [
        'name' => 'Delux Kaffe',
        'url' => 'http://www.deluxkaffekompagniet.dk/',
        'address' => 'Nordskovvej 1, 3700 Rønne',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['bornholm'],
        'blog' => 'http://www.deluxkaffekompagniet.dk/117637604',
        'cvr' => 34812225,
    ],
    [
        'name' => 'Mols Kafferisteri',
        'url' => 'http://molskafferisteri.dk/',
        'address' => 'Lyngevej 58, 8420 Knebel',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['jylland'],
        'facebook' => 'molskafferisteri',
        'instagram' => 'molskafferisteri',
        'blog' => 'http://molskafferisteri.dk/blog/',
        'cvr' => 33053630,
    ],
    [
        'name' => 'Risteriet',
        'url' => 'http://www.risteriet.dk/',
        'address' => ' Tørringvej 17, 2610 Rødovre ',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['sjælland'],
        'facebook' => 'risteriet',
        'twitter' => 'Risteriet',
        'instagram' => 'risteriet',
        'cvr' => 27926754,
    ],
    [
        'name' => 'Holy Bean',
        'url' => 'http://holybean.dk/',
        'address' => 'Cederfeldsgade 18A, 5560 Aarup',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['fyn'],
        'facebook' => 'Holybean.dk',
        'twitter' => 'Holy_Bean',
        'instagram' => 'holybeandk',
        'blog' => 'http://holybean.dk/holy-bean-blog/',
        'cvr' => 35681841,
    ],
    [
        'name' => 'Just Coffee',
        'url' => 'http://justcoffee.dk/',
        'address' => 'Frederiksborgvej 551, 4000 Roskilde',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['sjælland'],
        'facebook' => 'just.coffee.dk',
        'instagram' => 'justcoffeedk',
        'cvr' => 27827055,
    ],
    [
        'name' => 'Baris&Co',
        'url' => 'http://barisco.dk/',
        'address' => 'Melchiors Plads 3, 2100 København Ø',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['sjælland'],
        'facebook' => 'KaffeBarisCo',
        'cvr' => 36028785,
    ],
    [
        'name' => 'Det lille Risteri',
        'url' => 'http://detlilleristeri.dk/',
        'address' => 'Refshalevej 320, 1432 København K',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['sjælland'],
        'facebook' => 'DetlilleRisteri',
        'instagram' => 'det_lille_risteri',
        'cvr' => 35842047,
    ],
    [
        'name' => 'The Coffee Collective',
        'url' => 'http://coffeecollective.dk/',
        'address' => 'Godthåbsvej 34B, 2000 Frederiksberg',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['sjælland'],
        'facebook' => 'thecoffeecollective',
        'twitter' => 'coffeecollectif',
        'instagram' => 'coffeecollectif',
        'blog' => 'http://coffeecollective.dk/blog/',
        'cvr' => 30706595,
    ],
    [
        'name' => 'Øristeriet',
        'url' => 'http://www.øristeriet.dk/',
        'address' => 'Valhøjs Allé 190D, DK-2610 Rødovre',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['sjælland'],
        'facebook' => 'oristeriet',
        'twitter' => 'oeristeriet',
        'instagram' => 'oeristeriet',
        'blog' => 'http://www.øristeriet.dk/blogs/oekologisk-kaffe',
        'cvr' => 15442697,
    ],
    [
        'name' => 'Strandvejsristeriet',
        'url' => 'http://www.strandvejsristeriet.dk/',
        'address' => 'Kronborg Slot, Bygn 12A, 3000 Helsingør',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['sjælland'],
        'facebook' => 'strandvejsristeriet',
        'instagram' => 'strandvejsristeriet',
        'cvr' => 34596123,
    ],
    [
        'name' => 'Kama Group',
        'url' => 'http://www.kamagroup.dk/',
        'address' => 'Kannikegade 9, 8500 Grenaa',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['jylland'],
        'facebook' => 'Kamakaffe',
        'cvr' => 29824754,
    ],
    [
        'name' => 'chulumenda',
        'url' => 'http://www.chulumenda.dk/',
        'address' => 'Bjergagervej 35, 8300 Odder',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['jylland'],
        'cvr' => 35790594,
    ],
    [
        'name' => 'Kaffe & Co',
        'url' => 'http://www.kaffeogco.dk/',
        'address' => 'Bredskiftevej 18, 8210 Århus V',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['jylland'],
        'facebook' => 'friskkaffe',
        'cvr' => 31280923,
    ],
    [
        'name' => 'Espressos',
        'url' => 'http://www.espressos.dk/',
        'address' => 'Skudehavnsvej 2b, 2150 Nordhavn',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['sjælland'],
        'cvr' => 31270359,
    ],
    [
        'name' => 'Davids Coffee',
        'url' => 'http://www.davidscoffee.com/',
        'address' => 'Rugvænget 21A, DK-2630 Taastrup',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['sjælland'],
        'facebook' => 'DavidsCoffee',
        'instagram' => 'davidscoffee',
        'cvr' => 26792444,
    ],
    [
        'name' => 'Kaffevaerk',
        'url' => 'http://kaffevaerk.dk/',
        'address' => 'Smallegade 22, 2000 Frederiksberg',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['sjælland'],
        'facebook' => 'pages/Kaffevaerk/91412441009',
        'instagram' => 'kaffevaerket',
        'cvr' => 28840802,
    ],
    [
        'name' => 'Hipster brew',
        'url' => 'http://hipsterbrew.com/',
        'address' => 'Jernbanegade 44, 1 6000 Kolding',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['jylland'],
        'facebook' => 'hipsterbrew',
        'instagram' => 'hipsterbrew',
        'cvr' => 36723866,
    ],
    [
        'name' => 'Farm Mountain Coffee',
        'url' => 'http://farmmountain.dk/',
        'address' => 'Mysundevej 10, 8930 Randers',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['jylland'],
        'facebook' => 'fmkaffe',
        'cvr' => 31166888,
    ],
    [
        'name' => 'KaffeMekka',
        'url' => 'http://www.kaffemekka.dk/',
        'address' => 'Beringvej 21A, 8361 Hasselager',
        'added' => '2015-08-26 12:00:00',
        'tags' => ['jylland'],
        'facebook' => 'KaffeMekka',
        'cvr' => 29220638,
    ],
    [
        'name' => 'Nørre Snede Kafferisteri',
        'url' => 'http://www.noerresnedekafferisteri.dk/',
        'address' => 'Strøget 8, 8766 Nørre Snede',
        'thanks' => 'Logan,Marie,Per',
        'added' => '2015-08-27 12:00:00',
        'tags' => ['jylland'],
        'facebook' => 'pages/Nørre-Snede-kafferisteri/739945149407976',
        'blog' => 'http://www.noerresnedekafferisteri.dk/nyheder',
        'cvr' => 1019577658,
    ],
    [
        'name' => 'emofabrik',
        'url' => 'http://emofabrik.dk/',
        'address' => 'Søren Frichsvej 22, DK-8000 Århus C',
        'thanks' => 'Logan',
        'added' => '2015-08-27 12:00:00',
        'tags' => ['jylland'],
        'cvr' => 26504481,
    ],
    [
        'name' => "Buchwald's Kafferisteri",
        'url' => 'http://buchwalds.dk/',
        'address' => 'Skansevej 8A, 3700 Rønne',
        'thanks' => 'Logan',
        'added' => '2015-08-27 12:00:00',
        'tags' => ['bornholm'],
        'facebook' => 'buchwalds',
        'instagram' => 'buchwalds_kafferisteri',
        'cvr' => 26498074,
    ],
    [
        'name' => 'kaffeagenterne',
        'url' => 'http://kaffeagenterne.dk/',
        'address' => 'Mysundevej 10, DK-8930 Randers NØ',
        'thanks' => 'Logan',
        'added' => '2015-08-27 12:00:00',
        'tags' => ['jylland'],
        'cvr' => 31166888,
    ],
    [
        'name' => 'Zozozial coffee',
        'url' => 'http://zozozialcoffee.dk/',
        'address' => 'Vestergade 24, 5700 Svendborg',
        'added' => '2015-08-27 12:00:00',
        'tags' => ['fyn'],
        'facebook' => 'zozozialcoffee',
        'cvr' => 35643672,
    ],
    [
        'name' => 'Soze kaffe & thebar',
        'url' => 'http://www.sozekaffe.dk/',
        'address' => 'Havnegade 18, 5600 Faaborg',
        'thanks' => 'Rita',
        'added' => '2015-08-27 12:00:00',
        'tags' => ['fyn'],
        'facebook' => 'Sozekaffe',
        'cvr' => 18263033,
    ],
    [
        'name' => 'Stellini Kaffe',
        'url' => 'http://www.stellini.dk/',
        'address' => 'Cikorievej 80, 5220 Odense SØ',
        'thanks' => 'Jonny',
        'added' => '2015-08-28 12:00:00',
        'tags' => ['fyn'],
        'facebook' => 'stellinikaffe',
        'cvr' => 33045131,
    ],
    [
        'name' => 'KaffeLars',
        'url' => 'http://www.kaffelars.dk/',
        'address' => 'Brylle Industrivej 5, 5690 Tommerup',
        'thanks' => 'Jonny',
        'added' => '2015-08-28 12:00:00',
        'tags' => ['fyn'],
        'cvr' => 35657568,
    ],
    [
        'name' => 'Ækvatorkaffe',
        'url' => 'http://www.aekvatorkaffe.dk/',
        'address' => 'Skovhusvej 4, 8762 Flemming',
        'thanks' => 'Jonny',
        'added' => '2015-08-28 12:00:00',
        'tags' => ['jylland'],
        'facebook' => 'pages/Aekvatorkaffe/153180914797308',
        'blog' => 'http://www.aekvatorkaffe.dk/blog-om-kaffe/',
        'cvr' => 34393699,
    ],
    [
        'name' => 'La Cabra',
        'url' => 'http://www.lacabra.dk/',
        'address' => 'Graven 20, 8000 Aarhus C',
        'thanks' => 'Jonny',
        'added' => '2015-08-28 12:00:00',
        'tags' => ['jylland'],
        'facebook' => 'Lacabracoffeeroasters',
        'instagram' => 'lacabracoffee',
        'cvr' => 34221065,
    ],
    [
        'name' => 'Kaffehuset Møn',
        'url' => 'http://www.kaffehusetmoen.dk/',
        'address' => 'Storegade 48, 4780 Stege',
        'thanks' => 'Jonny',
        'added' => '2015-08-28 12:00:00',
        'tags' => ['jylland'],
        'facebook' => 'KaffehusetMoen',
        'twitter' => 'kaffehusetmoen',
        'instagram' => 'kaffehusetmoen',
        'cvr' => 34899339,
    ],
    [
        'name' => 'Altura Kaffe',
        'url' => 'http://www.altura.dk/',
        'address' => 'Graven 22, 8000 Aarhus C',
        'thanks' => 'Jonny',
        'added' => '2015-08-28 12:00:00',
        'tags' => ['jylland'],
        'facebook' => 'AlturaKaffe',
        'cvr' => 18975831,
    ],
    [
        'name' => 'Riccos',
        'url' => 'http://riccos.dk/',
        'address' => 'Frederiksborgade 50, 1360 København K',
        'thanks' => 'Jonny',
        'added' => '2015-08-28 12:00:00',
        'tags' => ['sjælland'],
        'facebook' => 'KaffebarRiccos',
        'instagram' => 'riccoskaffebar',
        'cvr' => 32339867,
    ],
    [
        'name' => 'The Factory',
        'url' => 'http://www.thefactorycoffee.eu/',
        'address' => 'Refshalevej 163A, st., 1432 København K',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['sjælland'],
        'facebook' => 'thefactorycoffee',
        'twitter' => 'thefactoryroast',
        'cvr' => 36021209,
    ],
    [
        'name' => 'Kent Kaffe Laboratorium',
        'url' => 'http://www.kentkaffelaboratorium.com/',
        'address' => 'Nørre Farimagsgade 70, 1364 København K',
        'added' => '2015-09.01 11:30:00',
        'tags' => ['sjælland'],
        'facebook' => 'kentkaffelab',
        'instagram' => 'kentkaffelab',
        'cvr' => 34461732,
    ],
    [
        'name' => 'Ren Kaffe',
        'url' => 'http://renkaffe.dk/',
        'address' => 'Willemoesgade 82st. th., 8200 Aarhus N',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['jylland'],
        'facebook' => 'RenKaffe',
        'cvr' => 34494266,
    ],
    [
        'name' => 'Amokka',
        'url' => 'http://www.amokka.dk/',
        'address' => 'Vibe Alle 3, 2980 Kokkedal',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['sjælland'],
        'facebook' => 'Amokka',
        'cvr' => 20050535,
    ],
    [
        'name' => 'Black Juice',
        'url' => 'http://blackjuice.dk/',
        'address' => 'Sankt Mortens Vej 3, 4000 Roskilde',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['sjælland'],
        'instagram' => 'blackjuicecoffee',
        'cvr' => 35596429,
    ],
    [
        'name' => 'Nygaards Kaffe',
        'url' => 'http://www.nygaardskaffe.dk/',
        'address' => 'Jernbanegade 2D, 9900 Frederikshavn',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['jylland'],
        'facebook' => 'Nygaardskaffe',
        'cvr' => 18391198,
    ],
    [
        'name' => 'Kaffeselskabet',
        'url' => 'http://www.kaffeselskabet.dk/',
        'address' => 'Tostrupvej 142, 9240 Nibe',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['jylland'],
        'facebook' => 'Kaffeselskabet',
        'cvr' => 28877498,
    ],
    [
        'name' => 'Vendia Kaffe',
        'url' => 'http://www.vendiakaffe.dk/',
        'address' => 'Skagensvej 201, 9800 Hjørring',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['jylland'],
        'facebook' => 'vendiakaffe',
        'cvr' => 35012966,
    ],
    [
        'name' => 'KaffeClausen',
        'url' => 'http://www.kaffeclausen.dk/',
        'address' => 'Strandbyvej 10, 8240 Risskov',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['jylland'],
        'facebook' => 'pages/Kaffeclausen/497743987015446',
        'twitter' => 'Kaffeclausen',
        'blog' => 'http://www.kaffeclausen.dk/nyheder/',
        'cvr' => 35783814,
    ],
    [
        'name' => 'Q-kaffe',
        'url' => 'http://q-kaffe.dk/',
        'address' => 'Blåbærvej 40, 5260 Odense S',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['fyn'],
        'facebook' => 'qkaffe',
        'cvr' => 34095671,
    ],
    [
        'name' => 'Kafferisteriet',
        'url' => 'http://kafferisteriet.dk/',
        'address' => 'Korsgade 17, 5700 Svendborg',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['fyn'],
        'cvr' => 29189730,
    ],
    [
        'name' => 'Nielsens Kafferisteri',
        'url' => 'http://www.nielsenskafferisteri.dk/',
        'address' => 'Krondrevet 3, 4760 Vordingborg',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['sjælland'],
        'facebook' => 'nielsenskafferisteri',
        'cvr' => 20985976,
    ],
    [
        'name' => 'Den Bæredygtige Bønne',
        'url' => 'http://www.ugandakaffe.dk/',
        'address' => 'Ønskevej 14, 3360 Liseleje',
        'added' => '2015-09-01 11:30:00',
        'tags' => ['sjælland'],
        'facebook' => 'ugandakaffe.dk',
        'cvr' => 34395438,
    ],
    [
        'name' => 'Copenhagen Roaster',
        'url' => 'http://www.cphroaster.dk/',
        'address' => 'Gammel Koege Landevej 22, 2500 Valby',
        'added' => '2015-09-08 14:30:00',
        'tags' => ['sjælland'],
        'facebook' => 'copenhagenroaster',
        'blog' => 'http://estatecoffee.blogspot.dk/',
        'cvr' => 28481853,
    ],
];

use Symfony\Component\Console\Application;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputOption;

// 3. party
use Doctrine\ODM\MongoDB\Tools\Console\Helper\DocumentManagerHelper;
use GuzzleHttp\Client as GuzzleClient;
use Geocoder\Provider\GoogleMaps;
use Ivory\HttpAdapter\Guzzle6HttpAdapter;

$console = new Application('My Silex Application', 'n/a');
$console->getDefinition()->addOption(new InputOption('--env', '-e', InputOption::VALUE_REQUIRED, 'The Environment name.', 'dev'));
$console->setDispatcher($app['dispatcher']);
$console
    ->register('my-command')
    ->setDefinition(array(
        // new InputOption('some-option', null, InputOption::VALUE_NONE, 'Some help'),
    ))
    ->setDescription('My command description')
    ->setCode(function (InputInterface $input, OutputInterface $output) use ($app, $shops, $thanks) {
        // do something

        $guzzle   = new GuzzleClient(['verify' => true]);
        $geocoder = new GoogleMaps(new Guzzle6HttpAdapter($guzzle), null, null, true, 'AIzaSyDU1YKd8OwCpJYWaD_LyUd7UYefFzn9Sjg');

        $dm = $app['doctrine.odm.mongodb.dm'];

        /** @var \Doctrine\ODM\MongoDB\Query\Builder $qb */
        $qb = $dm->createQueryBuilder('Model\Roaster');

        foreach ($shops as $shop) {
            $count = $qb->field('url')->equals($shop['url'])
                ->hydrate(false)
                ->getQuery()
                ->count();

            if ($count) {
//                continue;
            }

            $r = new Model\Roaster();
            $r->setName($shop['name']);
            $r->setUrl($shop['url']);
            if (isset($shop['cvr'])) {
                $r->setRegistrationNumber($shop['cvr']);

                try {
                    $response = $guzzle->get('http://cvrapi.dk/api?vat='.$shop['cvr'].'&country=dk');

                    $data = json_decode($response->getBody()->getContents(), true);
                    $time = DateTime::createFromFormat('m/d - Y', $data['startdate'], new DateTimeZone('Europe/Copenhagen'));

                    $r->setEstablishedAt($time);

                    if (!is_null($data['enddate'])) {
                        $time = DateTime::createFromFormat('m/d - Y', $data['enddate'], new DateTimeZone('Europe/Copenhagen'));
                        $r->setInvalidatedAt($time);
                    }
                } catch (\Exception $e) {
                    $output->writeln('cvrapi error: '.$shop['cvr']);
                }
            }

#            try {
                $geo = $geocoder->geocode($shop['address'].', denmark');
                $geo = $geo->first();
#            } catch (\Exception $e) {
#                $output->writeln('out of lookups, bailing... try again tomorrow');
#                break;
#            }
print_r($geo);exit;
            $a = new Model\Address();
            $a->setAddressLine1($geo->getStreetName().' '.$geo->getStreetNumber());
            $a->setPostalCode($geo->getPostalCode());
            $a->setLocality($geo->getLocality());
            $a->setCountryCode($geo->getCountryCode());
            $a->setLocale('da');

            $c = new Model\Coordinates();
            $c->setLat($geo->getLatitude());
            $c->setLon($geo->getLongitude());

            $a->setCoordinates($c);
            $r->setAddress($a);

            if (isset($shop['thanks'])) {
                foreach (explode(',', $shop['thanks']) as $key) {
                    $key = trim($key);

                    $c = new Model\Credit();
                    $c->setName($thanks[$key]['name']);
                    $c->setSource($thanks[$key]['url']);
                    $r->addCredit($c);
                }
            }
            $r->setTags($shop['tags']);

            if (isset($shop['facebook'])) {
                $r->addFeed('facebook', $shop['facebook']);
            }
            if (isset($shop['twitter'])) {
                $r->addFeed('twitter', $shop['twitter']);
            }
            if (isset($shop['instagram'])) {
                $r->addFeed('instagram', $shop['instagram']);
            }
            if (isset($shop['blog'])) {
                $r->addFeed('blog', $shop['blog']);
            }

            $dm->persist($r);
        }

        $dm->flush();
    })
;

// MongoDB Stuff..
$dm = new DocumentManagerHelper($app['doctrine.odm.mongodb.dm']);
$console->getHelperSet()->set($dm, 'dm');

// Add Doctrine ODM commands
$console->addCommands(array(
    new Doctrine\ODM\MongoDB\Tools\Console\Command\GenerateDocumentsCommand(),
    new Doctrine\ODM\MongoDB\Tools\Console\Command\GenerateHydratorsCommand(),
    new Doctrine\ODM\MongoDB\Tools\Console\Command\GenerateProxiesCommand(),
    new Doctrine\ODM\MongoDB\Tools\Console\Command\GenerateRepositoriesCommand(),
    new Doctrine\ODM\MongoDB\Tools\Console\Command\QueryCommand(),
    new Doctrine\ODM\MongoDB\Tools\Console\Command\ClearCache\MetadataCommand(),

    new Doctrine\ODM\MongoDB\Tools\Console\Command\Schema\CreateCommand(),
    new Doctrine\ODM\MongoDB\Tools\Console\Command\Schema\DropCommand(),
    new Doctrine\ODM\MongoDB\Tools\Console\Command\Schema\UpdateCommand(),
));

return $console;
